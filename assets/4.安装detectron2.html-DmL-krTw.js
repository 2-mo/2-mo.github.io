import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as i,c as r,a as e,b as n,d as a,f as l}from"./app-BBSx41Yi.js";const c={},p=e("h4",{id:"环境要求",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#环境要求"},[e("span",null,"环境要求")])],-1),d=e("li",null,"Linux or macOS with Python ≥ 3.6",-1),h={href:"https://github.com/pytorch/vision/",target:"_blank",rel:"noopener noreferrer"},u={href:"https://pytorch.org/",target:"_blank",rel:"noopener noreferrer"},m=e("li",null,"OpenCV is optional but needed by demo and visualization",-1),b={href:"https://ninja-build.org/",target:"_blank",rel:"noopener noreferrer"},v=l(`<h4 id="安装detectron2" tabindex="-1"><a class="header-anchor" href="#安装detectron2"><span>安装detectron2</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token string">&#39;Check the vision of pytorch&#39;</span> -<span class="token operator">&gt;</span> https://pytorch.org/get-started/locally/

<span class="token comment"># install pytorch</span>
$ conda <span class="token function">install</span> pytorch torchvision torchaudio <span class="token assign-left variable">cudatoolkit</span><span class="token operator">=</span><span class="token number">11.1</span> <span class="token parameter variable">-c</span> pytorch-lts <span class="token parameter variable">-c</span> nvidia

conda <span class="token function">install</span> pytorch torchvision torchaudio <span class="token assign-left variable">cudatoolkit</span><span class="token operator">=</span><span class="token number">11.3</span> <span class="token parameter variable">-c</span> pytorch <span class="token parameter variable">-c</span> nvidia

<span class="token comment"># install cv2 </span>
$  <span class="token string">&#39;if xcb error&#39;</span> $ pip3 <span class="token function">install</span> opencv-python-headless 

<span class="token comment"># git project</span>
$ <span class="token function">git</span> clone https://github.com/facebookresearch/detectron2.git
<span class="token comment"># Install Pre-Built Detectron2 (Linux only)</span>
$ python <span class="token parameter variable">-m</span> pip <span class="token function">install</span> detectron2 <span class="token parameter variable">-f</span> <span class="token punctuation">\\</span>
  https://dl.fbaipublicfiles.com/detectron2/wheels/cu111/torch1.8/index.html

<span class="token comment"># Build Detectron2 from Source</span>
$ python <span class="token parameter variable">-m</span> pip <span class="token function">install</span> <span class="token parameter variable">-e</span> detectron2

<span class="token string">&#39;To rebuild detectron2 that is built from a local clone, use&#39;</span> <span class="token variable">$rm</span> <span class="token parameter variable">-rf</span> build/ **/*.so <span class="token string">&#39;to clean the old build first. You often need to rebuild detectron2 after reinstalling PyTorch.&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><h5 id="opencv-python-的区别" tabindex="-1"><a class="header-anchor" href="#opencv-python-的区别"><span>opencv-python 的区别</span></a></h5><ol><li>opencv-python：这个存储库只包含OpenCV库的<strong>主要模块</strong>。如果您是PyImageSearch阅读器，则不需要安装此软件包。</li><li>opencv-contrib-python：包含<strong>主要模块</strong>与<strong>contrib模块</strong>。 # 一般推荐安装，因为它包含了所有的OpenCV功能。</li><li>opencv-python-headless：与opencv-python相同但没有GUI功能。适用于无界面系统。</li><li>opencv-contrib-python-headless：与opencv-contrib-python相同，但没有GUI功能。适用于无界面系统。</li></ol></blockquote><h4 id="运行demo" tabindex="-1"><a class="header-anchor" href="#运行demo"><span>运行demo</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 官方示例</span>
$ python projects/CenterNet2/demo/demo.py --config-file projects/CenterNet2/configs/CenterNet2_R50_1x.yaml <span class="token parameter variable">--input</span> path/to/image/ <span class="token parameter variable">--opts</span> MODEL.WEIGHTS models/CenterNet2_R50_1x.pth

<span class="token comment"># 运行代码</span>
$ python /home/leng/Documents/nemo/CenterNet2-master/projects/CenterNet2/demo.py --config-file /home/leng/Documents/nemo/CenterNet2-master/projects/CenterNet2/configs/CenterNet2_R2-101-DCN-BiFPN_4x+4x_1560_ST.yaml <span class="token parameter variable">--input</span> /home/leng/Documents/nemo/temp_img/ <span class="token parameter variable">--output</span> /home/leng/Documents/nemo/temp_output/ <span class="token parameter variable">--opts</span> MODEL.WEIGHTS /home/leng/Downloads/CenterNet2_R2-101-DCN-BiFPN_4x+4x_1560_ST.pth 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 使用tensorborad查看loss等信息</span>
$ tensorboard <span class="token parameter variable">--logdir</span> /home/leng/Documents/T42/detectron2/output/CenterNet2/Centernet2_3090
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>第一次使用时的报错，记录一下：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>/home/leng/anaconda3/envs/detectron2/lib/python3.8/site-packages/torch/cuda/__init__.py:104: UserWarning: 
NVIDIA GeForce RTX <span class="token number">3090</span> with CUDA capability sm_86 is not compatible with the current PyTorch installation.
The current PyTorch <span class="token function">install</span> supports CUDA capabilities sm_37 sm_50 sm_60 sm_61 sm_70 sm_75 compute_37.
If you want to use the NVIDIA GeForce RTX <span class="token number">3090</span> GPU with PyTorch, please check the instructions at https://pytorch.org/get-started/locally/

  warnings.warn<span class="token punctuation">(</span>incompatible_device_warn.format<span class="token punctuation">(</span>device_name, capability, <span class="token string">&quot; &quot;</span>.join<span class="token punctuation">(</span>arch_list<span class="token punctuation">)</span>, device_name<span class="token punctuation">))</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="attributeerror-module-distutils-has-no-attribute-version-解决方案" tabindex="-1"><a class="header-anchor" href="#attributeerror-module-distutils-has-no-attribute-version-解决方案"><span>AttributeError: module ‘distutils‘ has no attribute ‘version‘ 解决方案</span></a></h4><p>1 问题 PyTorch版本1.10，安装完tensorboard后运行代码时出现错误：AttributeError: module &#39;distutils&#39; has no attribute &#39;version&#39;。</p><p>2 原因 setuptools版本问题。</p><p>3 解决方案</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>pip uninstall setuptools
pip <span class="token function">install</span> <span class="token assign-left variable">setuptools</span><span class="token operator">==</span><span class="token number">59.5</span>.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,13);function g(k,y){const t=o("ExternalLinkIcon");return i(),r("div",null,[p,e("blockquote",null,[e("ul",null,[d,e("li",null,[n("PyTorch ≥ 1.6 and "),e("a",h,[n("torchvision"),a(t)]),n(" that matches the PyTorch installation. Install them together at "),e("a",u,[n("pytorch.org"),a(t)]),n(" to make sure of this")]),m,e("li",null,[n("gcc & g++ ≥ 5.4 are required. "),e("a",b,[n("ninja"),a(t)]),n(" is optional but recommended for faster build.")])])]),v])}const T=s(c,[["render",g],["__file","4.安装detectron2.html.vue"]]),x=JSON.parse(`{"path":"/coooder/ubuntu/process/4.%E5%AE%89%E8%A3%85detectron2.html","title":"安装detectron2","lang":"en-US","frontmatter":{"title":"安装detectron2","order":5,"description":"环境要求 Linux or macOS with Python ≥ 3.6 PyTorch ≥ 1.6 and torchvision that matches the PyTorch installation. Install them together at pytorch.org to make sure of this OpenCV is op...","head":[["meta",{"property":"og:url","content":"https://2-mo.github.io/coooder/ubuntu/process/4.%E5%AE%89%E8%A3%85detectron2.html"}],["meta",{"property":"og:site_name","content":"Tiu Mo's Blog"}],["meta",{"property":"og:title","content":"安装detectron2"}],["meta",{"property":"og:description","content":"环境要求 Linux or macOS with Python ≥ 3.6 PyTorch ≥ 1.6 and torchvision that matches the PyTorch installation. Install them together at pytorch.org to make sure of this OpenCV is op..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-09-01T07:46:43.000Z"}],["meta",{"property":"article:author","content":"Tiu Mo"}],["meta",{"property":"article:modified_time","content":"2024-09-01T07:46:43.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"安装detectron2\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-09-01T07:46:43.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Tiu Mo\\",\\"url\\":\\"https://2-mo.github.io\\"}]}"]]},"headers":[],"git":{"createdTime":1719572997000,"updatedTime":1725176803000,"contributors":[{"name":"2-mo","email":"1982800736@qq.com","commits":1}]},"readingTime":{"minutes":1.62,"words":486},"filePathRelative":"coooder/ubuntu/process/4.安装detectron2.md","localizedDate":"June 28, 2024","excerpt":"<h4>环境要求</h4>\\n<blockquote>\\n<ul>\\n<li>Linux or macOS with Python ≥ 3.6</li>\\n<li>PyTorch ≥ 1.6 and <a href=\\"https://github.com/pytorch/vision/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">torchvision</a> that matches the PyTorch installation. Install them together at <a href=\\"https://pytorch.org/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">pytorch.org</a> to make sure of this</li>\\n<li>OpenCV is optional but needed by demo and visualization</li>\\n<li>gcc &amp; g++ ≥ 5.4 are required. <a href=\\"https://ninja-build.org/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">ninja</a> is optional but recommended for faster build.</li>\\n</ul>\\n</blockquote>","autoDesc":true}`);export{T as comp,x as data};
